# A. Сбалансированное двоичное дерево поиска

|                                |                   |
| ------------------------------ | ----------------- |
| ограничение по времени на тест | 2 секунды         |
| ограничение по памяти на тест  | 512 мегабайт      |
| ввод                           | стандартный ввод  |
| вывод                          | стандартный вывод |

Реализуйте сбалансированное двоичное дерево поиска.

## Входные данные
Входной файл содержит описание операций с деревом, их количество не превышает 100. В каждой строке находится одна из следующих операций:

- `insert x` — добавить в дерево ключ `x`. Если ключ `x` есть в дереве, то ничего делать не надо;
- `delete x` — удалить из дерева ключ `x`. Если ключа `x` в дереве нет, то ничего делать не надо;
- `exists x` — если ключ `x` есть в дереве выведите `true`, если нет `false`;
- `next x` — выведите минимальный элемент в дереве, строго больший `x`, или none если такого нет;
- `prev x` — выведите максимальный элемент в дереве, строго меньший `x`, или none если такого нет.

В дерево помещаются и извлекаются только целые числа, не превышающие по модулю $10^9$.

## Выходные данные
Выведите последовательно результат выполнения всех операций `exists`, `next`, `prev`. Следуйте формату выходного файла из примера.

### Пример
входные данные
```
insert 2
insert 5
insert 3
exists 2
exists 4
next 4
prev 4
delete 5
next 4
prev 4
```
выходные данные
```
true
false
5
3
none
3
```

### Примечание
Реализуйте Декартово дерево.




# B. Неявный ключ

|                                |                   |
| ------------------------------ | ----------------- |
| ограничение по времени на тест | 2 секунды         |
| ограничение по памяти на тест  | 256 мегабайт      |
| ввод                           | стандартный ввод  |
| вывод                          | стандартный вывод |

Научитесь быстро делать две операции с массивом:  

- `add i x` — добавить после $i$-го элемента x ( $0 \leq i \leq n$ )
- `del i` — удалить $i$-й элемент ( $1 \leq i \leq n$ )

## Входные данные
На первой строке $n_0$ и $m$ ( $1 \leq n_0, m \leq 10^5$ ) — длина исходного массива и количество запросов. 
На второй строке $n_0$ целых чисел от $0$ до $10^9 - 1$ — исходный массив. 
Далее $m$ строк, содержащие запросы. Гарантируется, что запросы корректны: например, если просят удалить $i$-й элемент, он точно есть.

## Выходные данные
Выведите конечное состояние массива. На первой строке количество элементов, на второй строке сам массив.

### Пример
входные данные
```
3 4
1 2 3
del 3
add 0 9
add 3 8
del 2
```
выходные данные
```
3
9 2 8 
```




# С. Переместить в начало

|                                |                   |
| ------------------------------ | ----------------- |
| ограничение по времени на тест | 6 секунд         |
| ограничение по памяти на тест  | 512 мегабайт      |
| ввод                           | стандартный ввод  |
| вывод                          | стандартный вывод |

Вам дан массив $a_1 = 1, a_2 = 2, ..., a_n = n$ и последовальность операций: переместить элементы с $l_i$ по $r_i$ в начало массива. 
Например, для массива $2, 3, 6, 1, 5, 4$, после операции $(2, 4)$ новый порядок будет $3, 6, 1, 2, 5, 4$. 
А после применения операции $(3, 4)$ порядок элементов в массиве будет $1, 2, 3, 6, 5, 4$.

Выведите порядок элементов в массиве после выполнения всех операций.

## Входные данные
В первой строке входного файла указаны числа $n$ и $m$ ( $2 \leq n \leq 10^5$, $1 \leq m \leq 10^5$ ) — число элементов в массиве и число операций. Следующие $m$ строк содержат операции в виде двух целых чисел: $l_i$ и $r_i$ ( $1 \leq l_i \leq r_i \leq n$ ).

## Выходные данные
Выведите $n$ целых чисел — порядок элементов в массиве после применения всех операций.

### Пример
входные данные
```
6 3
2 4
3 5
2 2
```
выходные данные
```
1 4 5 2 3 6 
```




# D. Развороты

|                                |                   |
| ------------------------------ | ----------------- |
| ограничение по времени на тест | 1 секунда         |
| ограничение по памяти на тест  | 512 мегабайт      |
| ввод                           | стандартный ввод  |
| вывод                          | стандартный вывод |

Вам дан массив $a_1 = 1, a_2 = 2, ..., a_n = n$ и последовальность операций: переставить элементы с $l_i$ по $r_i$ в обратном порядке. 
Например, для массива $1, 2, 3, 4, 5$, после операции $(2, 4)$ новый порядок будет $1, 4, 3, 2, 5$. 
А после применения операции $(3, 5)$ порядок элементов в массиве будет $1, 4, 5, 2, 3$.

Выведите порядок элементов в массиве после выполнения всех операций.

## Входные данные
В первой строке входного файла указаны числа $n$ и $m$ ( $2 \leq n \leq 10^5$, $1 \leq m \leq 10^5$ ) — число элементов в массиве и число операций. Следующие $m$ строк содержат операции в виде двух целых чисел: $l_i$ и $r_i$ ( $1 \leq l_i \leq r_i \leq n$ ).

## Выходные данные
Выведите $n$ целых чисел — порядок элементов в массиве после применения всех операций.

### Пример
входные данные
```
5 3
2 4
3 5
2 2
```
выходные данные
```
1 4 5 2 3 
```
