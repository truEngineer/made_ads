# A. –ü—Ä–æ—Å—Ç–æ–µ –¥–≤–æ–∏—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–∏—Å–∫–∞

|                                |                   |
| ------------------------------ | ----------------- |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç | 2 —Å–µ–∫—É–Ω–¥—ã         |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–∞–º—è—Ç–∏ –Ω–∞ —Ç–µ—Å—Ç  | 512 –º–µ–≥–∞–±–∞–π—Ç      |
| –≤–≤–æ–¥                           | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥  |
| –≤—ã–≤–æ–¥                          | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ |

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ –¥–≤–æ–∏—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–∏—Å–∫–∞.

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–µ—Ä–µ–≤–æ–º, –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 100. –í –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –æ–¥–Ω–∞ –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

- `insert x` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –¥–µ—Ä–µ–≤–æ –∫–ª—é—á `x`. –ï—Å–ª–∏ –∫–ª—é—á `x` –µ—Å—Ç—å –≤ –¥–µ—Ä–µ–≤–µ, —Ç–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω–∞–¥–æ;
- `delete x` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–∑ –¥–µ—Ä–µ–≤–∞ –∫–ª—é—á `x`. –ï—Å–ª–∏ –∫–ª—é—á–∞ `x` –≤ –¥–µ—Ä–µ–≤–µ –Ω–µ—Ç, —Ç–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω–∞–¥–æ;
- `exists x` ‚Äî –µ—Å–ª–∏ –∫–ª—é—á `x` –µ—Å—Ç—å –≤ –¥–µ—Ä–µ–≤–µ –≤—ã–≤–µ–¥–∏—Ç–µ `true`, –µ—Å–ª–∏ –Ω–µ—Ç `false`;
- `next x` ‚Äî –≤—ã–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –¥–µ—Ä–µ–≤–µ, —Å—Ç—Ä–æ–≥–æ –±–æ–ª—å—à–∏–π `x`, –∏–ª–∏ none –µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç;
- `prev x` ‚Äî –≤—ã–≤–µ–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –¥–µ—Ä–µ–≤–µ, —Å—Ç—Ä–æ–≥–æ –º–µ–Ω—å—à–∏–π `x`, –∏–ª–∏ none –µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç.

–í –¥–µ—Ä–µ–≤–æ –ø–æ–º–µ—â–∞—é—Ç—Å—è –∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞, –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—â–∏–µ –ø–æ –º–æ–¥—É–ª—é $10^9$.

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—ã–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π `exists`, `next`, `prev`. –°–ª–µ–¥—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç—É –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞.

### –ü—Ä–∏–º–µ—Ä
–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
insert 2
insert 5
insert 3
exists 2
exists 4
next 4
prev 4
delete 5
next 4
prev 4
```
–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
true
false
5
3
none
3
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑—É–π—Ç–µ –æ–±—ã—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–∏—Å–∫–∞.




# B. –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–≤–æ–∏—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–∏—Å–∫–∞

|                                |                   |
| ------------------------------ | ----------------- |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç | 2 —Å–µ–∫—É–Ω–¥—ã         |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–∞–º—è—Ç–∏ –Ω–∞ —Ç–µ—Å—Ç  | 512 –º–µ–≥–∞–±–∞–π—Ç      |
| –≤–≤–æ–¥                           | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥  |
| –≤—ã–≤–æ–¥                          | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ |

–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–≤–æ–∏—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–∏—Å–∫–∞.

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–µ—Ä–µ–≤–æ–º, –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç $10^5$. –í –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –æ–¥–Ω–∞ –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

- `insert x` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –¥–µ—Ä–µ–≤–æ –∫–ª—é—á `x`. –ï—Å–ª–∏ –∫–ª—é—á `x` –µ—Å—Ç—å –≤ –¥–µ—Ä–µ–≤–µ, —Ç–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω–∞–¥–æ;
- `delete x` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–∑ –¥–µ—Ä–µ–≤–∞ –∫–ª—é—á `x`. –ï—Å–ª–∏ –∫–ª—é—á–∞ `x` –≤ –¥–µ—Ä–µ–≤–µ –Ω–µ—Ç, —Ç–æ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω–∞–¥–æ;
- `exists x` ‚Äî –µ—Å–ª–∏ –∫–ª—é—á ùë• –µ—Å—Ç—å –≤ –¥–µ—Ä–µ–≤–µ –≤—ã–≤–µ–¥–∏—Ç–µ `true`, –µ—Å–ª–∏ –Ω–µ—Ç `false`;
- `next x` ‚Äî –≤—ã–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –¥–µ—Ä–µ–≤–µ, —Å—Ç—Ä–æ–≥–æ –±–æ–ª—å—à–∏–π `x`, –∏–ª–∏ ¬´none¬ª –µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç;
- `prev x` ‚Äî –≤—ã–≤–µ–¥–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –¥–µ—Ä–µ–≤–µ, —Å—Ç—Ä–æ–≥–æ –º–µ–Ω—å—à–∏–π `x`, –∏–ª–∏ ¬´none¬ª –µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –Ω–µ—Ç.

–í –¥–µ—Ä–µ–≤–æ –ø–æ–º–µ—â–∞—é—Ç—Å—è –∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞, –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—â–∏–µ –ø–æ –º–æ–¥—É–ª—é $10^9$.

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—ã–≤–µ–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π `exists`, `next`, `prev`. –°–ª–µ–¥—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç—É –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞.

### –ü—Ä–∏–º–µ—Ä
–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
insert 2
insert 5
insert 3
exists 2
exists 4
next 4
prev 4
delete 5
next 4
prev 4
```
–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
true
false
5
3
none
3
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑—É–π—Ç–µ AVL-–¥–µ—Ä–µ–≤–æ.




# C. K-–π –º–∞–∫—Å–∏–º—É–º

|                                |                   |
| ------------------------------ | ----------------- |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç | 2 —Å–µ–∫—É–Ω–¥—ã         |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–∞–º—è—Ç–∏ –Ω–∞ —Ç–µ—Å—Ç  | 512 –º–µ–≥–∞–±–∞–π—Ç      |
| –≤–≤–æ–¥                           | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥  |
| –≤—ã–≤–æ–¥                          | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ |

–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, —Ä–µ–∞–ª–∏–∑—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∑–≤–æ–ª—è—é—â—É—é –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã, –∞ —Ç–∞–∫–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—å k-–π –º–∞–∫—Å–∏–º—É–º.

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ $n$ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ ( $n \leq 100 000$ ). –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ $n$ —Å—Ç—Ä–æ–∫ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –∫–∞–∂–¥–∞—è. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –¥–≤—É—Ö —á–∏—Å–µ–ª $c_i$ –∏ $k_i$ ‚Äî —Ç–∏–ø –∏ –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ ( $|k_i| \leq 10^9$ ). 
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- `1`: –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª—é—á–æ–º $k_i$.
- `0`: –ù–∞–π—Ç–∏ –∏ –≤—ã–≤–µ—Å—Ç–∏ $k_i$-–π –º–∞–∫—Å–∏–º—É–º.
- `-1`: –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å –∫–ª—é—á–æ–º $k_i$.

–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å —Ä–∞–≤–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã.
–¢–∞–∫–∂–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ $k_i$-–≥–æ –º–∞–∫—Å–∏–º—É–º–∞, –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã –Ω—É–ª–µ–≤–æ–≥–æ —Ç–∏–ø–∞ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–≤–µ–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ ‚Äî $k_i$-–π –º–∞–∫—Å–∏–º—É–º.

### –ü—Ä–∏–º–µ—Ä
–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
11
1 5
1 3
1 7
0 1
0 2
0 3
-1 5
1 10
0 1
0 2
0 3
```
–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
7
5
3
10
7
3
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–í –≤–µ—Ä—à–∏–Ω–µ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å–ª–æ –≤–µ—Ä—à–∏–Ω –≤ –ø–æ–¥–¥–µ—Ä–µ–≤–µ.




# D. –ò —Å–Ω–æ–≤–∞ —Å—É–º–º–∞

|                                |                   |
| ------------------------------ | ----------------- |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç | 3 —Å–µ–∫—É–Ω–¥—ã         |
| –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–∞–º—è—Ç–∏ –Ω–∞ —Ç–µ—Å—Ç  | 256 –º–µ–≥–∞–±–∞–π—Ç      |
| –≤–≤–æ–¥                           | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥  |
| –≤—ã–≤–æ–¥                          | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ |

–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ $S$ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª, —Å –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:

 - `add(i)` –¥–æ–±–∞–≤–∏—Ç—å –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ $S$ —á–∏—Å–ª–æ $i$ (–µ—Å–ª–∏ –æ–Ω —Ç–∞–º —É–∂–µ –µ—Å—Ç—å, —Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è).
 - `sum(l, r)` –≤—ã–≤–µ—Å—Ç–∏ —Å—É–º–º—É –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ $x$ –∏–∑ $S$, –∫–æ—Ç–æ—Ä—ã–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤—É $l‚Äâ\leq‚Äâx‚Äâ\leq‚Äâr$.

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–ò—Å—Ö–æ–¥–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ $S$ –ø—É—Å—Ç–æ. –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç $n$ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π ( $1‚Äâ\leq‚Äân‚Äâ\leq‚Äâ300‚Äâ000$ ). 
–°–ª–µ–¥—É—é—â–∏–µ $n$ —Å—Ç—Ä–æ–∫ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏. –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –≤–∏–¥ –ª–∏–±–æ `+ i`, –ª–∏–±–æ `? l r`. –û–ø–µ—Ä–∞—Ü–∏—è `? l r` –∑–∞–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å `sum(l, r)`.

–ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è `+ i` –∏–¥–µ—Ç –≤–æ –≤—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ –≤ –Ω–∞—á–∞–ª–µ –∏–ª–∏ –ø–æ—Å–ª–µ –¥—Ä—É–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ `+`, —Ç–æ –æ–Ω–∞ –∑–∞–¥–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é `add(i)`. 
–ï—Å–ª–∏ –∂–µ –æ–Ω–∞ –∏–¥–µ—Ç –ø–æ—Å–ª–µ –∑–∞–ø—Ä–æ—Å–∞ `?`, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –±—ã–ª `y`, —Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è `add((i+y) mod 10^9)`.

–í–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–µ–∂–∞—Ç –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ –æ—Ç $0$ –¥–æ $10^9$.

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤—ã–≤–µ–¥–∏—Ç–µ –æ–¥–Ω–æ —á–∏—Å–ª–æ ‚Äî –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å.

### –ü—Ä–∏–º–µ—Ä
–≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
6
+ 1
+ 3
+ 3
? 2 4
+ 1
? 2 4
```
–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```
3
7
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–î–µ–∫–∞—Ä—Ç–æ–≤–æ –¥–µ—Ä–µ–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ª—å–∑—è.
